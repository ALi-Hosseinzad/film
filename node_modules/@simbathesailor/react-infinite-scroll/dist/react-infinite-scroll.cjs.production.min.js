"use strict";var e,n=(e=require("react"))&&"object"==typeof e&&"default"in e?e.default:e;function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function t(){var e=n.useState(null),r=e[0],t=e[1],i=n.useCallback((function(e){t(e),i.current=e}),[]);return[r,i]}var i={intersectionObj:{},observerInState:null,isVisible:!1};function o(e,n){switch(n.type){case"SETINTERSECTIONOBJ":return r({},e,{intersectionObj:n.data});case"SETOBSERVERHANDLE":return r({},e,{observerInState:n.data});case"SET_VISIBILITY":return r({},e,{isVisible:n.data})}}var c=function(){var e=window;return!(!e||!e.IntersectionObserver)||(console.warn("Intersection Observer is not supported in the current browser / environment"),!1)},u=function(e){return e.intersectionRatio>=1},a={rootMargin:"0px 0px 0px 0px",threshold:"0, 1",when:!0,visibilityCondition:u},l={rootMargin:"0px 0px 0px 0px",threshold:"0, 1",when:!0,visibilityCondition:function(e){return e.intersectionRatio>=1}};function s(){return n.createElement("h1",null,"Loading More...")}exports.InfiniteScroll=function(e){var f,v=e.callback,d=e.options,E=e.LoadMoreComponent,h=void 0===E?null:E,p=e.whenInfiniteScroll,b=void 0===p||p,I=r({},l,{},void 0===d?l:d),S=function(e){var r=n.useRef(e);return n.useEffect((function(){r.current=e})),[r]}(v)[0],y=[(f=function(e){var l=r({},a,{},e),s=l.rootMargin,f=l.threshold,v=l.when,d=l.callback,E=l.visibilityCondition,h=t(),p=h[0],b=h[1],I=t(),S=I[0],y=I[1],O=n.useReducer(o,i),R=O[0],m=O[1],w=R.observerInState,T=R.isVisible,C=n.useRef(null),g=n.useRef(null);function x(e,n){e.forEach((function(e){m({type:"SETINTERSECTIONOBJ",data:e}),w||m({type:"SETOBSERVERHANDLE",data:n});var r=u;E&&(r=E),m({type:"SET_VISIBILITY",data:r(e)})}))}var M=n.useRef(x);return n.useEffect((function(){M.current=x})),n.useEffect((function(){c&&(g.current=d||M.current)}),[d,E,M]),n.useEffect((function(){c&&(v||C.current&&null!=C.current&&S&&C.current.unobserve(S))}),[C,S,v]),n.useEffect((function(){if(c){var e=S;if(v){var n=new IntersectionObserver(g.current,{root:p||null,threshold:f.split(",").map((function(e){return parseFloat(e)})),rootMargin:s});C.current=n,e&&C.current&&C.current.observe(e)}return function(){e&&C.current&&C.current.unobserve(e)}}}),[S,p,s,v,g,f]),[T,y,b]}(r({},I,{when:b})||l))[1],f[0],f[2]],O=y[0],R=y[1],m=n.useCallback((function(e){b&&S.current&&(0,S.current)(e)}),[S,b]);n.useEffect((function(){m&&b&&m(R)}),[R,m,b]);var w=[];if(e.children){var T=[];n.Children.forEach(e.children,(function(e){T=Array.isArray(e)?[].concat(T,e):[].concat(T,[e])})),w=n.Children.map(T,(function(e,r){return r===T.length-1?n.cloneElement(e,{ref:O}):e})).filter((function(e){return e}))}return R&&w&&(w=[].concat(w,[h?n.cloneElement(h,{key:Math.random()}):n.createElement(s,{key:Math.random()})])),n.createElement(n.Fragment,null,w)};
//# sourceMappingURL=react-infinite-scroll.cjs.production.min.js.map
