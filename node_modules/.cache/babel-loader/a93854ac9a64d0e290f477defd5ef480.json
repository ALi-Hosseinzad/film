{"ast":null,"code":"var _jsxFileName = \"/home/alihz/Desktop/react/film/src/components/content/11.jsx\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport ContentLoading from \"./ContentLoading\";\nimport ContentItems from \"./ContentItems\";\nimport useInfiniteScroll from \"@closeio/use-infinite-scroll\";\nimport \"./FetchContent.css\";\nconst URL = \"http://api-v2.filmnet.ir/widgets/home-page?\";\nexport default function Example({\n  parentCallback\n}) {\n  const ListLoading = ContentLoading(ContentItems);\n  const [items, setItems] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, loaderRef, scrollerRef] = useInfiniteScroll({\n    hasMore\n  });\n  const [next, setNext] = useState();\n  useEffect(() => {\n    const realPage = page;\n    console.log(realPage);\n    fetch(`${URL}offset=${realPage}&count=5`).then(res => res.json()).then(res => {\n      setItems(prev => [...prev, res]);\n      setNext(res.meta.next_url);\n      setHasMore(realPage + 5 <= res.meta.total_items_count);\n    });\n  }, [page]); // function getFetch() {\n  //   let realPage = page+1;\n  //   fetch(`${URL}offset=${realPage}&count=5`)\n  //     .then((res) => res.json())\n  //     .then((res) => {\n  //       if (res.meta.next_url) {\n  //         setItems((prev) => [...prev, res]);\n  //         setNext(res.meta.next_url);\n  //         setHasMore(realPage+5 <=res.meta.total_items_count);\n  //       } else {\n  //         setHasMore(false);\n  //       }\n  //     });\n  // }\n  // function fetchMore(total,count, nextItem) {\n  //   if (total > 0) {\n  //     total = total - count;\n  //     if (total!==0) {\n  //       getFetch(nextItem);\n  //       return;\n  //     }\n  //   }\n  //}\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: scrollerRef,\n    className: \"scroll\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, items.map((item, index) => /*#__PURE__*/React.createElement(ListLoading, {\n    isLoading: false,\n    repos: item,\n    key: index,\n    parentCallback: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  })), hasMore && /*#__PURE__*/React.createElement(\"div\", {\n    ref: loaderRef,\n    style: {\n      margin: \"auto\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, \"\\u062F\\u0631\\u06CC\\u0627\\u0641\\u062A \\u0645\\u0648\\u0627\\u0631\\u062F \\u0628\\u06CC\\u0634\\u062A\\u0631\", \" \"));\n}","map":{"version":3,"sources":["/home/alihz/Desktop/react/film/src/components/content/11.jsx"],"names":["React","useState","useEffect","useCallback","ContentLoading","ContentItems","useInfiniteScroll","URL","Example","parentCallback","ListLoading","items","setItems","hasMore","setHasMore","page","loaderRef","scrollerRef","next","setNext","realPage","console","log","fetch","then","res","json","prev","meta","next_url","total_items_count","map","item","index","margin","textAlign"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,iBAAP,MAA8B,8BAA9B;AACA,OAAO,oBAAP;AAEA,MAAMC,GAAG,GAAG,6CAAZ;AACA,eAAe,SAASC,OAAT,CAAiB;AAAEC,EAAAA;AAAF,CAAjB,EAAqC;AAClD,QAAMC,WAAW,GAAGN,cAAc,CAACC,YAAD,CAAlC;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACc,IAAD,EAAOC,SAAP,EAAkBC,WAAlB,IAAiCX,iBAAiB,CAAC;AAAEO,IAAAA;AAAF,GAAD,CAAxD;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBlB,QAAQ,EAAhC;AAGAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkB,QAAQ,GAAGL,IAAjB;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAG,IAAAA,KAAK,CAAE,GAAEhB,GAAI,UAASa,QAAS,UAA1B,CAAL,CACGI,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESC,GAAD,IAAS;AACXb,MAAAA,QAAQ,CAAEe,IAAD,IAAU,CAAC,GAAGA,IAAJ,EAAUF,GAAV,CAAX,CAAR;AACAN,MAAAA,OAAO,CAACM,GAAG,CAACG,IAAJ,CAASC,QAAV,CAAP;AACAf,MAAAA,UAAU,CAACM,QAAQ,GAAC,CAAT,IAAaK,GAAG,CAACG,IAAJ,CAASE,iBAAvB,CAAV;AAEH,KAPH;AAQD,GAXQ,EAWN,CAACf,IAAD,CAXM,CAAT,CARkD,CAsBlD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,sBACE;AAAK,IAAA,GAAG,EAAEE,WAAV;AAAuB,IAAA,SAAS,EAAC,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGN,KAAK,CAACoB,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,kBACT,oBAAC,WAAD;AACE,IAAA,SAAS,EAAE,KADb;AAEE,IAAA,KAAK,EAAED,IAFT;AAGE,IAAA,GAAG,EAAEC,KAHP;AAIE,IAAA,cAAc,EAAED,IAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADH,EAUGnB,OAAO,iBACN;AAAK,IAAA,GAAG,EAAEG,SAAV;AAAqB,IAAA,KAAK,EAAE;AAAEkB,MAAAA,MAAM,EAAE,MAAV;AAAkBC,MAAAA,SAAS,EAAE;AAA7B,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2GACqB,GADrB,CAXJ,CADF;AAoBD","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport ContentLoading from \"./ContentLoading\";\nimport ContentItems from \"./ContentItems\";\nimport useInfiniteScroll from \"@closeio/use-infinite-scroll\";\nimport \"./FetchContent.css\";\n\nconst URL = \"http://api-v2.filmnet.ir/widgets/home-page?\";\nexport default function Example({ parentCallback }) {\n  const ListLoading = ContentLoading(ContentItems);\n  const [items, setItems] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, loaderRef, scrollerRef] = useInfiniteScroll({ hasMore });\n  const [next, setNext] = useState();\n\n  \n  useEffect(() => {\n    const realPage = page;\n    console.log(realPage);\n    fetch(`${URL}offset=${realPage}&count=5`)\n      .then((res) => res.json())\n      .then((res) => {\n          setItems((prev) => [...prev, res]);\n          setNext(res.meta.next_url);\n          setHasMore(realPage+5 <=res.meta.total_items_count);\n       \n      });\n  }, [page]);\n\n  \n  // function getFetch() {\n  //   let realPage = page+1;\n  //   fetch(`${URL}offset=${realPage}&count=5`)\n  //     .then((res) => res.json())\n  //     .then((res) => {\n  //       if (res.meta.next_url) {\n  //         setItems((prev) => [...prev, res]);\n  //         setNext(res.meta.next_url);\n  //         setHasMore(realPage+5 <=res.meta.total_items_count);\n\n  //       } else {\n  //         setHasMore(false);\n  //       }\n  //     });\n      \n    \n  // }\n\n  // function fetchMore(total,count, nextItem) {\n  //   if (total > 0) {\n  //     total = total - count;\n  //     if (total!==0) {\n  //       getFetch(nextItem);\n  //       return;\n  //     }\n  //   }\n  //}\n  return (\n    <div ref={scrollerRef} className=\"scroll\">\n      {items.map((item, index) => (\n        <ListLoading\n          isLoading={false}\n          repos={item}\n          key={index}\n          parentCallback={item}\n        />\n      ))}\n\n      {hasMore && (\n        <div ref={loaderRef} style={{ margin: \"auto\", textAlign: \"center\" }}>\n          دریافت موارد بیشتر{\" \"}\n        </div>\n      )}\n\n      {/* {console.log(items)} */}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}