{"ast":null,"code":"var _jsxFileName = \"/home/alihz/Desktop/react/film/src/components/content/11.jsx\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport ContentLoading from \"./ContentLoading\";\nimport ContentItems from \"./ContentItems\";\nimport useInfiniteScroll from \"@closeio/use-infinite-scroll\";\nconst URL = \"http://api-v2.filmnet.ir\";\nconst pageURL = \"/widgets/home-page?count=5\";\nexport default function Example() {\n  const ListLoading = ContentLoading(ContentItems);\n  const [items, setItems] = useState([]); // const [hasMore, setHasMore] = useState(false);\n\n  const [page, loaderRef, scrollerRef] = useInfiniteScroll({\n    hasMore\n  });\n  const [next, setNext] = useState();\n  useEffect(() => {\n    getFetch(pageURL);\n  }, [page]);\n\n  function getFetch(url) {\n    const realPage = page + 1;\n    fetch(`${URL + url}&page=${realPage}`).then(res => res.json()).then(res => {\n      setItems(prev => [...prev, res]);\n      console.log(res.data);\n      setHasMore(realPage * 10 <= res); // console.log(data.meta.next_url);\n\n      setNext(res.meta.next_url);\n    });\n  } //  function fetchMore(props, prevPrpos) {\n  //   //   props.map((item, index) => {\n  //   //     prevPrpos.map((val) => {\n  //         console.log(prevPrpos);\n  //         // if (item.meta.next_url === val) {\n  //         // console.log(val);\n  //         Fetch(prevPrpos);\n  //         // }\n  //       // });\n  //     // });\n  //   }\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: scrollerRef,\n    className: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, items.map((item, index) => /*#__PURE__*/React.createElement(ListLoading, {\n    isLoading: false,\n    repos: item,\n    key: index,\n    val: console.log(next),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  })), hasMore && /*#__PURE__*/React.createElement(\"div\", {\n    ref: loaderRef,\n    style: {\n      margin: \"auto\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"\\u062F\\u0631\\u06CC\\u0627\\u0641\\u062A \\u0645\\u0648\\u0627\\u0631\\u062F \\u0628\\u06CC\\u0634\\u062A\\u0631\", \" \"));\n}","map":{"version":3,"sources":["/home/alihz/Desktop/react/film/src/components/content/11.jsx"],"names":["React","useState","useEffect","useCallback","ContentLoading","ContentItems","useInfiniteScroll","URL","pageURL","Example","ListLoading","items","setItems","page","loaderRef","scrollerRef","hasMore","next","setNext","getFetch","url","realPage","fetch","then","res","json","prev","console","log","data","setHasMore","meta","next_url","map","item","index","margin","textAlign"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,iBAAP,MAA8B,8BAA9B;AAEA,MAAMC,GAAG,GAAG,0BAAZ;AACA,MAAMC,OAAO,GAAG,4BAAhB;AACA,eAAe,SAASC,OAAT,GAAmB;AAChC,QAAMC,WAAW,GAAGN,cAAc,CAACC,YAAD,CAAlC;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC,CAFgC,CAGhC;;AACA,QAAM,CAACY,IAAD,EAAOC,SAAP,EAAkBC,WAAlB,IAAiCT,iBAAiB,CAAC;AAAEU,IAAAA;AAAF,GAAD,CAAxD;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,EAAhC;AACAC,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,QAAQ,CAACX,OAAD,CAAR;AACD,GAFQ,EAEN,CAACK,IAAD,CAFM,CAAT;;AAIA,WAASM,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,UAAMC,QAAQ,GAAGR,IAAI,GAAG,CAAxB;AACAS,IAAAA,KAAK,CAAE,GAAEf,GAAG,GAAGa,GAAI,SAAQC,QAAS,EAA/B,CAAL,CACGE,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESC,GAAD,IAAS;AACbZ,MAAAA,QAAQ,CAAEc,IAAD,IAAU,CAAC,GAAGA,IAAJ,EAAUF,GAAV,CAAX,CAAR;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACK,IAAhB;AACAC,MAAAA,UAAU,CAACT,QAAQ,GAAG,EAAX,IAAeG,GAAhB,CAAV,CAHa,CAIb;;AACAN,MAAAA,OAAO,CAACM,GAAG,CAACO,IAAJ,CAASC,QAAV,CAAP;AACD,KARH;AASD,GArB+B,CAuBhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,sBACE;AAAK,IAAA,GAAG,EAAEjB,WAAV;AAAuB,IAAA,SAAS,EAAC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,KAAK,CAACsB,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,kBACT,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAE,KAAxB;AAA+B,IAAA,KAAK,EAAED,IAAtC;AAA4C,IAAA,GAAG,EAAEC,KAAjD;AAAwD,IAAA,GAAG,EAAGR,OAAO,CAACC,GAAR,CAAYX,IAAZ,CAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADH,EAMID,OAAO,iBAEP;AAAK,IAAA,GAAG,EAAEF,SAAV;AAAqB,IAAA,KAAK,EAAE;AAAEsB,MAAAA,MAAM,EAAE,MAAV;AAAkBC,MAAAA,SAAS,EAAE;AAA7B,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2GACqB,GADrB,CARJ,CADF;AAiBD","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport ContentLoading from \"./ContentLoading\";\nimport ContentItems from \"./ContentItems\";\nimport useInfiniteScroll from \"@closeio/use-infinite-scroll\";\n\nconst URL = \"http://api-v2.filmnet.ir\";\nconst pageURL = \"/widgets/home-page?count=5\";\nexport default function Example() {\n  const ListLoading = ContentLoading(ContentItems);\n  const [items, setItems] = useState([]);\n  // const [hasMore, setHasMore] = useState(false);\n  const [page, loaderRef, scrollerRef] = useInfiniteScroll({ hasMore });\n  const [next, setNext] = useState();\n  useEffect(() => {\n    getFetch(pageURL);\n  }, [page]);\n\n  function getFetch(url) {\n    const realPage = page + 1;\n    fetch(`${URL + url}&page=${realPage}`)\n      .then((res) => res.json())\n      .then((res) => {\n        setItems((prev) => [...prev, res]);\n        console.log(res.data);\n        setHasMore(realPage * 10<=res);\n        // console.log(data.meta.next_url);\n        setNext(res.meta.next_url);\n      });\n  }\n\n  //  function fetchMore(props, prevPrpos) {\n  //   //   props.map((item, index) => {\n  //   //     prevPrpos.map((val) => {\n  //         console.log(prevPrpos);\n  //         // if (item.meta.next_url === val) {\n  //         // console.log(val);\n  //         Fetch(prevPrpos);\n  //         // }\n  //       // });\n  //     // });\n  //   }\n \n  return (\n    <div ref={scrollerRef} className=\"1\">\n      {items.map((item, index) => (\n        <ListLoading isLoading={false} repos={item} key={index} val ={console.log(next)} />\n      ))}\n\n      {\n        hasMore \n        && (\n        <div ref={loaderRef} style={{ margin: \"auto\", textAlign: \"center\" }}>\n          دریافت موارد بیشتر{\" \"}\n        </div>\n      )}\n\n      {/* {console.log(items)} */}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}